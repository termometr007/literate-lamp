<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Панель управления</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-left">
            <img src="https://via.placeholder.com/40" alt="Company Logo" class="company-logo" id="company-logo">
            <div class="company-info">
                <h1 id="company-name">Название Компании</h1>
                <p>Панель управления</p>
            </div>
        </div>
        <div class="header-right">
            <button class="settings-button" id="settings-btn" title="Настройки">&#9881;</button>
        </div>
    </div>

    <div class="content-area">
        <div id="home-page" class="page-content">
            <h2>Главная</h2>
            <div class="admin-notes-container">
                <h3>Заметки для админов</h3>
                <div id="admin-notes-content">
                    <p>Здесь будут отображаться важные заметки.</p>
                </div>
            </div>

            <div class="sections-grid" id="main-sections-grid">
                </div>

            <div class="sections-actions" id="sections-admin-actions">
                <button id="create-section-btn" class="action-button">Создать новый раздел</button>
                <button id="go-back-section-btn" class="action-button" style="display: none;">Назад</button>
            </div>

            <div class="admin-test-controls" id="admin-controls-panel">
                <h3>Админ-контроль (только для тестирования)</h3>
                <input type="text" id="logo-url-input" placeholder="URL нового лого компании">
                <input type="text" id="company-name-input" placeholder="Новое название компании">
                <button id="apply-company-changes">Применить изменения компании</button>

                <hr style="width: 80%; border: 0; border-top: 1px solid var(--border-color); margin: 15px auto;">

                <input type="text" id="bot-logo-url-input" placeholder="URL нового лого бота">
                <button id="apply-bot-logo-changes">Применить логотип бота</button>

                <hr style="width: 80%; border: 0; border-top: 1px solid var(--border-color); margin: 15px auto;">
                <h4>Управление заметками</h4>
                <textarea id="new-admin-note-input" placeholder="Введите новую заметку..." rows="3"></textarea>
                <button id="add-admin-note-btn">Добавить заметку</button>
                <button id="clear-admin-notes-btn" class="secondary-button">Очистить заметки</button>
            </div>

            <button id="download-reports-btn" class="action-button" style="margin-top: 30px; display: none;">Скачать отчеты</button>
        </div>

        <div id="sections-page" class="page-content hidden">
            <h2 id="current-section-name"></h2>
            <div class="sub-sections-list" id="sub-sections-list">
                </div>
            <div class="items-list" id="items-list">
                </div>
            <div class="sections-actions">
                <button id="create-sub-section-btn" class="action-button">Создать подраздел</button>
                <button id="create-item-btn" class="action-button">Добавить позицию</button>
                <button id="back-from-section-btn" class="action-button secondary-button">Назад</button>
            </div>
        </div>

        <div id="tasks-page" class="page-content hidden">
            <h2>Мои задачи</h2>
            <div class="task-filter-tabs">
                <button class="filter-tab active" data-filter="all">Все</button>
                <button class="filter-tab" data-filter="my">Мои</button>
            </div>
            <div class="tasks-list" id="tasks-list">
                <p class="no-tasks-message">Нет доступных задач.</p>
            </div>
            <button id="create-task-btn" class="create-task-button" style="display: none;">Создать задачу</button>
        </div>

        <div id="analytics-page" class="page-content hidden">
            <h2>Аналитика</h2>
            <p>Здесь будет представлена аналитика по работе.</p>
        </div>

        <div id="settings-page" class="page-content hidden">
            <h2>Настройки</h2>
            <p>Управление общими настройками приложения и аккаунта.</p>
            <button id="toggle-dark-mode" class="action-button">Переключить темный режим</button>
        </div>
    </div>

    <div class="bottom-nav">
        <a href="#home" class="nav-item active" data-page="home-page">
            <span class="nav-item-icon">&#127963;</span>
            <span class="nav-item-text">Главная</span>
        </a>
        <a href="#tasks" class="nav-item" data-page="tasks-page">
            <span class="nav-item-icon">&#128221;</span>
            <span class="nav-item-text">Задачи</span>
        </a>
        <a href="#analytics" class="nav-item" data-page="analytics-page">
            <span class="nav-item-icon">&#128200;</span>
            <span class="nav-item-text">Аналитика</span>
        </a>
    </div>

    <div id="new-section-modal" class="modal new-section-modal" style="display: none;">
        <div class="modal-content">
            <h3 id="new-modal-title">Создать новый раздел</h3>
            <label for="new-section-name-input">Название:</label>
            <input type="text" id="new-section-name-input" placeholder="Введите название" required>
            <div class="modal-actions">
                <button id="confirm-new-section-btn" class="action-button">Создать</button>
                <button id="cancel-new-section-btn" class="action-button secondary-button">Отмена</button>
            </div>
        </div>
    </div>

    <div id="edit-modal" class="modal edit-modal" style="display: none;">
        <div class="modal-content">
            <h3 id="edit-modal-title">Редактировать</h3>
            <label for="edit-name-input">Название:</label>
            <input type="text" id="edit-name-input" required>

            <div id="edit-item-fields" style="display: none;">
                <label for="edit-quantity-input">Количество:</label>
                <input type="number" id="edit-quantity-input" min="0" required>
                <label for="edit-min-quantity-input">Минимальное количество:</label>
                <input type="number" id="edit-min-quantity-input" min="0">
            </div>

            <div class="modal-actions">
                <button id="confirm-edit-btn" class="action-button">Сохранить</button>
                <button id="cancel-edit-btn" class="action-button secondary-button">Отмена</button>
            </div>
        </div>
    </div>

    <div id="quantity-modal" class="modal quantity-modal" style="display: none;">
        <div class="modal-content">
            <h3 id="quantity-modal-title">Изменить количество</h3>
            <label for="quantity-input">Количество:</label>
            <input type="number" id="quantity-input" value="1" min="1" required>
            <div class="modal-actions">
                <button id="add-quantity-btn" class="action-button">Добавить</button>
                <button id="subtract-quantity-btn" class="action-button secondary-button">Списать</button>
                <button id="cancel-quantity-btn" class="action-button">Отмена</button>
            </div>
        </div>
    </div>

    <div id="recipients-modal" class="modal recipients-modal" style="display: none;">
        <div class="modal-content">
            <h3>Выберите получателей</h3>
            <div class="recipient-filter-tabs">
                <button class="filter-tab active" data-filter="all">Все</button>
                <button class="filter-tab" data-filter="admins" id="filter-admins-tab">Админы</button>
                <button class="filter-tab" data-filter="employees">Сотрудники</button>
            </div>
            <div class="recipients-list" id="recipients-list">
                </div>
            <div class="modal-actions">
                <button id="confirm-recipients-btn" class="action-button">Подтвердить</button>
                <button id="cancel-recipients-btn" class="action-button secondary-button">Отмена</button>
            </div>
        </div>
    </div>

    <div id="context-menu" class="context-menu hidden">
        <div class="context-menu-item" data-action="edit">Редактировать</div>
        <div class="context-menu-item" data-action="add-subtract">Добавить/Списать</div>
        <div class="context-menu-item" data-action="min-quantity">Критический минимум</div>
        <div class="context-menu-item" data-action="remind">Напоминание</div>
        <div class="context-menu-item" data-action="hide-from">Скрыть от</div>
        <div class="context-menu-item" data-action="delete">Удалить</div>
    </div>

    <div id="task-status-modal" class="modal task-status-modal" style="display: none;">
        <div class="modal-content">
            <h3>Изменить статус задачи</h3>
            <button class="status-option-button new" data-status="Новая">Новая</button>
            <button class="status-option-button in-progress" data-status="В работе">В работе</button>
            <button class="status-option-button completed" data-status="Завершена">Завершена</button>
            <button class="status-option-button deferred" data-status="Отложена">Отложена</button>
            <button class="close-button" id="close-task-status-modal">Отмена</button>
        </div>
    </div>

    <div id="create-task-modal" class="modal create-task-modal" style="display: none;">
        <div class="modal-content">
            <h3>Создать новую задачу</h3>
            <input type="text" id="task-title-input" placeholder="Название задачи" required>
            <textarea id="task-description-input" placeholder="Описание задачи (необязательно)" rows="3"></textarea>
            <select id="task-assigned-to-select">
                <option value="">Назначить (необязательно)</option>
                </select>
            <div class="modal-actions">
                <button id="confirm-create-task-btn" class="action-button">Создать</button>
                <button id="cancel-create-task-btn" class="action-button secondary-button">Отмена</button>
            </div>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="script.js"></script>
</body>
</html>