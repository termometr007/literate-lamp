<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WMS Web App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app-container">
        <header>
            <span id="header-title">Главная</span>
        </header>

        <div id="main-page" class="page active">
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
                <span>Темная тема</span>
            </div>

            <div class="admin-test-controls" style="display: none;">
                <h3>Панель для отладки (видно только в браузере)</h3>
                <button id="add-test-data-btn" class="action-button">Добавить тестовые данные</button>
                <button id="clear-all-data-btn" class="action-button secondary-button">Очистить все данные</button>
                <button id="toggle-admin-mode-btn" class="action-button">Включить/Выключить Админ Мод</button>
            </div>

            <div id="main-admin-controls" class="admin-test-controls" style="display: none;">
                <h3>Панель Главного Администратора</h3>
                <button id="manage-users-btn" class="action-button">Управление пользователями</button>
                <button id="subscribe-btn" class="action-button" style="background-color: #28a745;">Оплатить подписку</button>
            </div>
            <button id="create-section-btn" class="action-button full-width-button" style="display: none;">Создать раздел</button>
            <button id="create-note-btn" class="action-button full-width-button" style="display: none;">Добавить заметку</button>

            <div id="sections-container" class="list-container">
                </div>

            <div id="notes-container" class="list-container notes-list">
                </div>

            <button id="download-reports-btn" class="action-button full-width-button" style="display: none; margin-top: 20px;">Скачать отчеты</button>

            <p>Просто прокрутите вниз, чтобы увидеть, как работает эффект!</p>
        </div>

        <div id="sections-page" class="page">
            <h2 style="text-align: center; color: var(--primary-color);">Разделы</h2>
            <div id="sections-list" class="list-container">
                </div>
            <p id="no-sections-message" class="no-data-message" style="display: none;">Разделов пока нет. Создайте первый!</p>
        </div>

        <div id="tasks-page" class="page">
            <h2 style="text-align: center; color: var(--primary-color);">Задачи</h2>
            <div class="task-filter-tabs">
                <button class="filter-tab active" data-filter="all">Все</button>
                <button class="filter-tab" data-filter="my">Мои</button>
                <button class="filter-tab" data-filter="available">Доступные</button> 
            </div>
            <button id="create-task-btn" class="action-button full-width-button" style="display: none;">Создать задание</button>
            <div id="tasks-list" class="list-container">
                </div>
            <p id="no-tasks-message" class="no-data-message" style="display: none;">Задач пока нет. Создайте первую!</p>
        </div>

        <div id="section-settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="section-settings-title">Настройки раздела</h3>
                <label for="section-name-input">Название раздела:</label>
                <input type="text" id="section-name-input">

                <label for="stock-manager-select">Ответственный за остатки:</label>
                <select id="stock-manager-select">
                    <option value="">Не назначен</option>
                    </select>
                
                <div class="modal-actions">
                    <button id="save-section-settings-btn" class="action-button">Сохранить</button>
                    <button id="cancel-section-settings-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="section-detail-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="section-detail-title"></h3>
                <div id="section-items-list" class="section-items-list">
                    </div>
                <p id="no-items-message" class="no-data-message" style="display: none;">В этом разделе пока нет товаров.</p>
                <div class="modal-actions">
                    <button id="add-items-btn" class="action-button">Добавить</button>
                    <button id="subtract-items-btn" class="action-button secondary-button">Списать</button>
                    <button id="close-section-detail-modal-btn" class="action-button secondary-button">Закрыть</button>
                </div>
            </div>
        </div>

        <div id="item-quantity-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="item-quantity-title"></h3>
                <label for="item-name-input">Название товара:</label>
                <input type="text" id="item-name-input">
                <label for="item-quantity-input">Количество:</label>
                <input type="number" id="item-quantity-input" min="1" value="1">
                <div class="modal-actions">
                    <button id="confirm-item-quantity-btn" class="action-button">Подтвердить</button>
                    <button id="cancel-item-quantity-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="edit-item-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Редактировать товар</h3>
                <label for="edit-item-name-input">Название товара:</label>
                <input type="text" id="edit-item-name-input">
                <label for="edit-item-quantity-input">Количество:</label>
                <input type="number" id="edit-item-quantity-input" min="0">
                <label for="edit-item-min-input">Критический минимум:</label>
                <input type="number" id="edit-item-min-input" min="0">
                <div class="modal-actions">
                    <button id="save-item-changes-btn" class="action-button">Сохранить</button>
                    <button id="delete-item-btn" class="action-button secondary-button" style="background-color: #dc3545; color: white;">Удалить</button>
                    <button id="cancel-edit-item-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="note-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="note-modal-title">Новая заметка</h3>
                <label for="note-title-input">Заголовок:</label>
                <input type="text" id="note-title-input">
                <label for="note-content-input">Содержание:</label>
                <textarea id="note-content-input"></textarea>
                <div class="modal-actions">
                    <button id="save-note-btn" class="action-button">Сохранить</button>
                    <button id="cancel-note-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="task-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="task-modal-title">Новое задание</h3>
                <label for="task-title-input">Название задания:</label>
                <input type="text" id="task-title-input">
                <label for="task-description-input">Описание:</label>
                <textarea id="task-description-input"></textarea>
                <label for="task-assigned-to-select">Назначить сотрудника:</label>
                <select id="task-assigned-to-select">
                    <option value="">Не назначен</option>
                    </select>
                <div class="modal-actions">
                    <button id="save-task-btn" class="action-button">Сохранить</button>
                    <button id="cancel-task-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="notification-recipients-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="recipients-modal-title">Получатели оповещений</h3>
                <div class="recipient-filter-tabs">
                    <button class="filter-tab active" data-filter="all">Все</button>
                    <button class="filter-tab" data-filter="admins">Админы</button>
                    <button class="filter-tab" data-filter="employees">Сотрудники</button>
                </div>
                <div class="select-all-container">
                    <input type="checkbox" id="select-all-recipients">
                    <label for="select-all-recipients">Выбрать всех</label>
                </div>
                <div class="recipients-list" id="recipients-list-container">
                    </div>
                <div class="modal-actions">
                    <button id="save-recipients-btn" class="action-button">Сохранить</button>
                    <button id="cancel-recipients-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

        <div id="task-status-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Изменить статус задачи</h3>
                <div class="task-status-options">
                    <button class="task-status-option-button status-new" data-status="Новая">Новая</button>
                    <button class="task-status-option-button status-in-progress" data-status="В работе">В работе</button>
                    <button class="task-status-option-button status-completed" data-status="Завершена">Завершена</button>
                    <button class="task-status-option-button status-deferred" data-status="Отложена">Отложена</button>
                    <button class="task-status-option-button close-modal" id="close-task-status-modal">Отмена</button>
                </div>
            </div>
        </div>

        <div id="user-management-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Управление пользователями</h3>
                <div class="recipient-filter-tabs">
                    <button class="filter-tab active" data-filter="all">Все</button>
                    <button class="filter-tab" data-filter="admins">Админы</button>
                    <button class="filter-tab" data-filter="employees">Сотрудники</button>
                </div>
                <div class="select-all-container">
                    <input type="checkbox" id="select-all-manage-users">
                    <label for="select-all-manage-users">Выбрать всех</label>
                </div>
                <div class="recipients-list" id="manage-users-list">
                    </div>
                <div class="modal-actions">
                    <button id="assign-role-btn" class="action-button">Назначить роль</button>
                    <button id="remove-user-btn" class="action-button secondary-button" style="background-color: #f44336; color: white;">Удалить пользователя</button>
                    <button id="cancel-user-management-btn" class="action-button secondary-button">Отмена</button>
                </div>
            </div>
        </div>

    </div>

    <nav class="bottom-navigation">
        <a href="#main-page" class="nav-item active" data-page="main-page">
            <i class="fas fa-home"></i>
            <span>Главная</span>
        </a>
        <a href="#sections-page" class="nav-item" data-page="sections-page">
            <i class="fas fa-boxes"></i>
            <span>Разделы</span>
        </a>
        <a href="#tasks-page" class="nav-item" data-page="tasks-page">
            <i class="fas fa-tasks"></i>
            <span>Задачи</span>
        </a>
    </nav>

    <script src="script.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</body>
</html>